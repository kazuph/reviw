# reviw プロジェクト固有ルール

## 開発・テスト時のサーバー起動

### 自分で確認する場合（デフォルト）
1. `run_in_background: true` でcli.cjsを起動
2. Playwrightでスクリーンショットを撮影して確認
3. 確認完了後、ユーザーに報告
4. **ユーザーを待たせない・中断させない**

### ユーザーにレビューさせる場合のみ
- **フォアグラウンドで起動する**（`run_in_background` は使わない）
- ユーザーがブラウザでSubmit & Exitするまで待機する
- ユーザーが明示的に「開いて」「見せて」と言った場合のみ

## 構文エラーの回避

テンプレートリテラル内でバッククォートを使う場合はエスケープする：
- 正: `\\\``
- 誤: `` ` ``

## 主要ファイル

- `cli.cjs` - メインソースコード（単一ファイル）
- `package.json` - reviw CLI本体のバージョン管理

## バージョン管理

**reviw CLIとpluginのバージョンは別管理**:
- reviw CLI: `package.json` の `version`
- plugin: `plugin/.claude-plugin/plugin.json` の `version`

plugin変更時は必ず `plugin/.claude-plugin/plugin.json` のバージョンを上げること。

## テストファイルの配置

- テスト用のmd/動画ファイルは `examples/` ディレクトリに配置する
- **プロジェクトルートにテストファイルを置かない**
- 一時的なテストは `/tmp/` に配置

## コミット・プッシュのルール

- 実装は1/3、テストで2/3、私が承認したら3/3です
- **コミット前には必ずユーザー承認が必要**
- 「コミットしてよいですか？」と聞くのは禁止 → 確認用のreviewを開いて承認を待つ
- 「ご自身で確認されますか？」と聞くのも禁止 → 確認はフォアグラウンドでreviwを開いて行う
- 承認なしでcommit/push禁止
